{% if chat.time_since.days > 365 %}
    {# different year#}
    <span>{{ chat.latest_message_sent|date:"d F Y" }}</span>
{% elif chat.time_since.days >= 1 and chat.time_since.days <= 365 %}
    {# same year but different day #}
    <span>{{ chat.latest_message_sent|date:"d F" }}</span>
{% else %}
    {# the same day#}
    <span>{{ chat.latest_message_sent|time:"H:i" }}</span>
{% endif %}
